<!DOCTYPE html>
<!--[if lt IE 7 ]>
<html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>
<html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>
<html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html class="not-ie" lang="en" xmlns:th="http://www.thymeleaf.org"><!--<![endif]-->

<head th:replace="fragment/common :: headerFragment"/>
<link rel="stylesheet" media="screen" th:href="@{/css/Affect.css}"/>

<body>
<section th:replace="fragment/common :: topFragment"/>
<section th:replace="fragment/common :: titleBar (title='Current Feelings')"/>

<section id="content" class="clearfix">
    <div class="container">
        <div class="row">
            <div class="col-md-10">

                <form id="affectForm" th:action="@{/questions/Affect}" method="POST">

                    <!-- Add timer -->
                    <input id="timeOnPage" name="timeOnPage" type="hidden"/>

                    <div class="section">
                        <br></br>
                        <div class="question"> How anxious do you feel right now, that is, at the present moment?</div>
                        <input id="PosFeelings" type="hidden" name="PosFeelings"/>
                        <br></br>
                        <div class="row">
                            <div class="col-12">
                                <input id="current_anxiety_slider"  type="range"  min="0" max="100"></input>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5 left">Not anxious at all</div>
                            <div class="col-2 left"></div>
                            <div class="col-5 right">Extremely Anxious</div>
                        </div>
                        <div class="after_slider"><label class="standard">
                            <br></br>
                            <input id="posSlider-enabled" type="checkbox" value="555"/>
                            Prefer not to answer
                        </label></div>

                        <script>
                            function ensure_clicked_slider() {
                                if (!$('#current_anxiety_slider').hasClass('clicked')) {
                                    alert("Please indicate how anxious you are feeling.");
                                }
                            }

                            $(document).ready(function () {
                                $('#current_anxiety_slider').one('click touchstart', function (event) {
                                    var slider =  $('#current_anxiety_slider');
                                    var x = event.pageX - slider.offset().left;
                                    var value = Math.round(x / slider.width() * 100);
                                    $('#current_anxiety_slider').val(value);
                                    $('#current_anxiety_slider').addClass('clicked');
                                    $('#PosFeelings').val(value).trigger('change');
                                });

                                $('#current_anxiety_slider').click(function () {
                                    $('#PosFeelings').val($(this).val()).trigger('change');
                                });

                                $('#posSlider-enabled').click(function () {
                                    if (this.checked) {
                                        $('#current_anxiety_slider').attr("disabled",true);
                                        $('#current_anxiety_slider').removeClass("clicked");
                                        $('#PosFeelings').val(555).trigger('change');
                                    } else {
                                        $('#current_anxiety_slider').attr("disabled",false);
                                        $('#current_anxiety_slider').addClass("clicked");
                                        $('#PosFeelings').val($('#current_anxiety_slider').val()).trigger('change');
                                    }
                                });

                                $('#PosFeelings').change(function() {
                                    console.log("Value set to " + $('#PosFeelings').val())
                                })


                            });

                        </script>
                    </div>

                    <div style="text-align:center">
                        <button type="submit" onclick="getTime()"> Continue</button>
                    </div>

                </form>


            </div>
        </div>
        <!--features ends-->

        <!--divider here-->
        <div class="spacer-40px"></div>

    </div>
</section>
<!-- footer starts
================================================== -->
<footer id="footer" class="clearfix" th:include="fragment/common :: footer"/>

<!-- copyright starts
================================================== -->
<section id="copyright" class="clearfix" th:include="fragment/common :: copyright"/>

<!--Javascript
================================================== -->
<div th:include="fragment/common :: scripts"/>
</body>
</html>
